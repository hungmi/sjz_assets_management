<div class="modal fade" id="<%= modal_id %>">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title"><%= title %></h4>
      </div>
      <div class="modal-body">
        <%= yield %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal"><%= close ||= "關閉" %></button>
        <button type="button" class="btn btn-primary submit-btn"><%= btn ||= "儲存" %></button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<script type="text/javascript">
  <% remote ||= false %>
  $btn = $('<%= "##{modal_id}" %>').find("button.submit-btn")
  $btn.on("click", function(e){
    if ($('<%= "##{modal_id}" %>').find("form").length > 0) {
      <% if remote %>
        e.preventDefault()
        $form = $('<%= "##{modal_id}" %>').find("form")
        $.ajax({
          url: $form.attr("action"),
          method: $form.attr("method"),
          data: $form.serialize() + "&_method=patch"
        }).done(function(data, status, xhr){
          id = $form.find("#employee_id").val()
          $("[data-employee-id=" + id + "]").replaceWith(data)
          $('<%= "##{modal_id}" %>').modal("hide")
        }).fail(function(xhr, status, errors){
          for (error in xhr.responseJSON) {
            $form.prepend("<div class='alert alert-danger'>" + error + xhr.responseJSON[error] + "</div>")
          }
        })
      <% else %>
        $('<%= "##{modal_id}" %>').find("form").submit()
      <% end %>
    }
  })
</script>